{"mappings":"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","sources":["<anon>","Desktop/Sim-Racing-Fuel--Calculator/script.js"],"sourcesContent":["(function() {\n    // ---- i18n ----\n    const I18N = {\n        zh: {\n            langName: \"\\u4E2D\\u6587\",\n            title: \"\\u6A21\\u62DF\\u8D5B\\u8F66\\u71C3\\u6CB9\\u8BA1\\u7B97\\u5668\",\n            docTitle: \"\\u6A21\\u62DF\\u8D5B\\u8F66\\u71C3\\u6CB9\\u8BA1\\u7B97\\u5668\",\n            introNote: \"\\u5FEB\\u901F\\u8BA1\\u7B97\\u4EFB\\u4F55\\u6A21\\u62DF\\u8D5B\\u8F66\\u6E38\\u620F\\uFF08\\u5305\\u62EC ACC\\u3001iRacing\\u3001Assetto Corsa Evo\\u3001AMS2 \\u7B49\\uFF09\\u7684\\u6B63\\u786E\\u71C3\\u6CB9\\u91CF\\u3002\\u53EA\\u9700\\u8F93\\u5165\\u6BCF\\u5708\\u71C3\\u6CB9\\u91CF\\u3001\\u6BD4\\u8D5B\\u8DDD\\u79BB\\u548C\\u6CB9\\u7BB1\\u5BB9\\u91CF\\uFF0C\\u5373\\u53EF\\u67E5\\u770B\\u9700\\u8981\\u8FDB\\u7AD9\\u6B21\\u6570\\u548C\\u8D77\\u59CB\\u71C3\\u6CB9\\u91CF\\u3002\",\n            inputsHeader: \"\\u8F93\\u5165\",\n            resultsHeader: \"\\u7ED3\\u679C\",\n            lblRaceTime: \"\\u6BD4\\u8D5B\\u65F6\\u95F4\",\n            lblLapTime: \"\\u5E73\\u5747\\u5355\\u5708\\u65F6\\u95F4\",\n            lblFuelPerLap: \"\\u6BCF\\u5708\\u6CB9\\u8017\",\n            lblTankCapacity: \"\\u6CB9\\u7BB1\\u6CB9\\u91CF\",\n            placeholderHours: \"\\u5C0F\\u65F6\",\n            placeholderMinutes: \"\\u5206\\u949F\",\n            placeholderLapMin: \"\\u5206\",\n            placeholderLapSec: \"\\u79D2\",\n            sufHours: \"\\u5C0F\\u65F6\",\n            sufMinutes: \"\\u5206\\u949F\",\n            sufLapMin: \"\\u5206\",\n            sufLapSec: \"\\u79D2\",\n            sufFuelPerLap: \"\\u5347/\\u5708\",\n            sufTankCapacity: \"\\u5347\",\n            btnCalculate: \"\\u8BA1\\u7B97\",\n            btnReset: \"\\u6E05\\u7A7A\",\n            lblTotalLaps: \"\\u603B\\u5708\\u6570\",\n            lblPitStops: \"\\u9700\\u8981\\u8FDB\\u7AD9\\u52A0\\u6CB9\\uFF08\\u6B21\\u6570\\uFF09\",\n            lblMinFuel: \"\\u5B8C\\u8D5B\\u6700\\u4F4E\\u9700\\u8981\\u71C3\\u6CB9\\u91CF\",\n            lblSafeFuel: \"\\u5B89\\u5168\\u71C3\\u6CB9\\uFF08\\u603B\\u5708\\u6570+2\\uFF09\",\n            lblLapsPerStint: \"\\u6BCF\\u6BB5\\u6BD4\\u8D5B\\u5708\\u6570\\uFF08\\u6BCF\\u7BB1\\uFF09\",\n            lblLastStintLaps: \"\\u6700\\u540E\\u9636\\u6BB5\\u5708\\u6570\",\n            lblStintFuelList: \"\\u6BCF\\u6BB5\\u884C\\u7A0B\\u7684\\u71C3\\u6CB9\\u6D88\\u8017\",\n            lblLastStintFuel: \"\\u6700\\u540E\\u9636\\u6BB5\\u7684\\u71C3\\u6599\\u91CF\",\n            formulaNote: \"\\u8BF4\\u660E\\uFF1A\\u603B\\u5708\\u6570\\u6309 \\u230A\\u6BD4\\u8D5B\\u603B\\u65F6\\u957F \\xf7 \\u5E73\\u5747\\u5355\\u5708\\u65F6\\u95F4\\u230B \\u8BA1\\u7B97\\u3002\",\n            cannotCompleteLap: \"\\u65E0\\u6CD5\\u5B8C\\u6210\\u4E00\\u5708\\uFF08\\u6CB9\\u7BB1\\u5BB9\\u91CF\\u8FC7\\u5C0F\\uFF09\",\n            unitLiter: \"\\u5347\"\n        },\n        en: {\n            langName: 'English',\n            title: 'Sim Racing Fuel Calculator',\n            docTitle: 'Sim Racing Fuel Calculator',\n            introNote: 'Quickly calculate the right fuel for any sim racing game (ACC, iRacing, Assetto Corsa Evo, AMS2, etc.). Enter fuel per lap, race duration and tank capacity to see pit stops and starting fuel.',\n            inputsHeader: 'Inputs',\n            resultsHeader: 'Results',\n            lblRaceTime: 'Race duration',\n            lblLapTime: 'Average lap time',\n            lblFuelPerLap: 'Fuel per lap',\n            lblTankCapacity: 'Tank capacity',\n            placeholderHours: 'Hours',\n            placeholderMinutes: 'Minutes',\n            placeholderLapMin: 'Min',\n            placeholderLapSec: 'Sec',\n            sufHours: 'h',\n            sufMinutes: 'min',\n            sufLapMin: 'min',\n            sufLapSec: 'sec',\n            sufFuelPerLap: 'L/lap',\n            sufTankCapacity: 'L',\n            btnCalculate: 'Calculate',\n            btnReset: 'Reset',\n            lblTotalLaps: 'Total laps',\n            lblPitStops: 'Pit stops (count)',\n            lblMinFuel: 'Minimum fuel to finish',\n            lblSafeFuel: 'Safe fuel (laps+2)',\n            lblLapsPerStint: 'Laps per stint (per tank)',\n            lblLastStintLaps: 'Last stint laps',\n            lblStintFuelList: 'Fuel for first stint',\n            lblLastStintFuel: 'Fuel for last stint',\n            formulaNote: \"Note: Total laps = \\u230Arace duration \\xf7 average lap time\\u230B.\",\n            cannotCompleteLap: 'Cannot complete a lap (tank capacity too small)',\n            unitLiter: 'L'\n        }\n    };\n    let currentLocale = 'zh';\n    function detectLocale() {\n        const saved = localStorage.getItem('locale');\n        if (saved === 'zh' || saved === 'en') return saved;\n        const nav = (navigator.language || navigator.userLanguage || '').toLowerCase();\n        return nav.startsWith('zh') ? 'zh' : 'en';\n    }\n    function applyTranslations(locale) {\n        const t = I18N[locale] || I18N.zh;\n        currentLocale = locale;\n        // html lang\n        document.documentElement.setAttribute('lang', locale === 'zh' ? 'zh-CN' : 'en');\n        // document and title\n        document.title = t.docTitle;\n        const map = [\n            [\n                'title',\n                'title'\n            ],\n            [\n                'introNote',\n                'introNote'\n            ],\n            [\n                'inputsHeader',\n                'inputsHeader'\n            ],\n            [\n                'resultsHeader',\n                'resultsHeader'\n            ],\n            [\n                'lblRaceTime',\n                'lblRaceTime'\n            ],\n            [\n                'lblLapTime',\n                'lblLapTime'\n            ],\n            [\n                'lblFuelPerLap',\n                'lblFuelPerLap'\n            ],\n            [\n                'lblTankCapacity',\n                'lblTankCapacity'\n            ],\n            [\n                'sufHours',\n                'sufHours'\n            ],\n            [\n                'sufMinutes',\n                'sufMinutes'\n            ],\n            [\n                'sufLapMin',\n                'sufLapMin'\n            ],\n            [\n                'sufLapSec',\n                'sufLapSec'\n            ],\n            [\n                'sufFuelPerLap',\n                'sufFuelPerLap'\n            ],\n            [\n                'sufTankCapacity',\n                'sufTankCapacity'\n            ],\n            [\n                'calculateBtn',\n                'btnCalculate'\n            ],\n            [\n                'resetBtn',\n                'btnReset'\n            ],\n            [\n                'lblTotalLaps',\n                'lblTotalLaps'\n            ],\n            [\n                'lblPitStops',\n                'lblPitStops'\n            ],\n            [\n                'lblMinFuel',\n                'lblMinFuel'\n            ],\n            [\n                'lblSafeFuel',\n                'lblSafeFuel'\n            ],\n            [\n                'lblLapsPerStint',\n                'lblLapsPerStint'\n            ],\n            [\n                'lblLastStintLaps',\n                'lblLastStintLaps'\n            ],\n            [\n                'lblStintFuelList',\n                'lblStintFuelList'\n            ],\n            [\n                'lblLastStintFuel',\n                'lblLastStintFuel'\n            ],\n            [\n                'formulaNote',\n                'formulaNote'\n            ]\n        ];\n        for (const [id, key] of map){\n            const node = document.getElementById(id);\n            if (node && t[key] !== undefined) node.textContent = t[key];\n        }\n        // placeholders\n        const raceHours = document.getElementById('raceHours');\n        const raceMinutes = document.getElementById('raceMinutes');\n        const lapMinutes = document.getElementById('lapMinutes');\n        const lapSeconds = document.getElementById('lapSeconds');\n        const fuelPerLap = document.getElementById('fuelPerLap');\n        const tankCapacity = document.getElementById('tankCapacity');\n        if (raceHours) raceHours.placeholder = t.placeholderHours;\n        if (raceMinutes) raceMinutes.placeholder = t.placeholderMinutes;\n        if (lapMinutes) lapMinutes.placeholder = t.placeholderLapMin;\n        if (lapSeconds) lapSeconds.placeholder = t.placeholderLapSec;\n        if (fuelPerLap) fuelPerLap.placeholder = locale === 'zh' ? \"\\u4F8B\\u5982 2.75\" : 'e.g. 2.75';\n        if (tankCapacity) tankCapacity.placeholder = locale === 'zh' ? \"\\u4F8B\\u5982 100\" : 'e.g. 100';\n        // dropdown value sync\n        const sel = document.getElementById('langSelect');\n        if (sel) sel.value = locale;\n    }\n    function toNumber(value) {\n        if (value === '' || value === null || value === undefined) return NaN;\n        return Number(value);\n    }\n    function clampNonNegative(n) {\n        return isFinite(n) && n >= 0 ? n : NaN;\n    }\n    function toSeconds(mins, secs) {\n        return mins * 60 + secs;\n    }\n    function roundUp(value, decimals) {\n        if (!isFinite(value)) return NaN;\n        const factor = Math.pow(10, decimals);\n        return Math.ceil(value * factor - 1e-10) / factor;\n    }\n    function round(value, decimals) {\n        if (!isFinite(value)) return NaN;\n        const factor = Math.pow(10, decimals);\n        return Math.round((value + Number.EPSILON) * factor) / factor;\n    }\n    function formatLiters(n) {\n        if (!isFinite(n)) return '-';\n        const t = I18N[currentLocale] || I18N.zh;\n        return currentLocale === 'zh' ? `${n.toFixed(2)} ${t.unitLiter}` : `${n.toFixed(2)} ${t.unitLiter}`;\n    }\n    function $(id) {\n        return document.getElementById(id);\n    }\n    // ---- easing + animation helpers ----\n    function easeOutCubic(t) {\n        return 1 - Math.pow(1 - t, 3);\n    }\n    function parseNumericFromText(text) {\n        if (!text || text === '-') return NaN;\n        const m = String(text).match(/-?\\d+(?:\\.\\d+)?/);\n        return m ? Number(m[0]) : NaN;\n    }\n    function animateNumber(elNode, toValue, options) {\n        const { duration = 500, decimals = 0, formatter = (v)=>String(v) } = options || {};\n        const fromText = elNode.textContent;\n        const fromValue = parseNumericFromText(fromText);\n        if (!isFinite(fromValue)) {\n            // no previous numeric value, set immediately\n            elNode.textContent = formatter(Number(toValue));\n            bumpCard(elNode);\n            return;\n        }\n        const start = performance.now();\n        function frame(now) {\n            const t = Math.min(1, (now - start) / duration);\n            const e = easeOutCubic(t);\n            const current = fromValue + (toValue - fromValue) * e;\n            const rounded = decimals > 0 ? Number(current.toFixed(decimals)) : Math.round(current);\n            elNode.textContent = formatter(rounded);\n            if (t < 1) requestAnimationFrame(frame);\n            else {\n                elNode.textContent = formatter(toValue);\n                bumpCard(elNode);\n            }\n        }\n        requestAnimationFrame(frame);\n    }\n    function bumpCard(valueEl) {\n        const card = valueEl.closest('.result-item');\n        if (!card) return;\n        card.classList.remove('bump');\n        // force reflow to restart animation\n        card.offsetWidth;\n        card.classList.add('bump');\n    }\n    const el = {\n        raceHours: $('raceHours'),\n        raceMinutes: $('raceMinutes'),\n        lapMinutes: $('lapMinutes'),\n        lapSeconds: $('lapSeconds'),\n        fuelPerLap: $('fuelPerLap'),\n        tankCapacity: $('tankCapacity'),\n        calculateBtn: $('calculateBtn'),\n        resetBtn: $('resetBtn'),\n        totalLaps: $('totalLaps'),\n        pitStops: $('pitStops'),\n        minFuel: $('minFuel'),\n        safeFuel: $('safeFuel'),\n        lapsPerStint: $('lapsPerStint'),\n        lastStintLaps: $('lastStintLaps'),\n        stintFuelList: $('stintFuelList'),\n        lastStintFuel: $('lastStintFuel')\n    };\n    function readInputs() {\n        // Time fields default to 0 when empty\n        const raceHours = clampNonNegative(toNumber(el.raceHours.value === '' ? 0 : el.raceHours.value));\n        const raceMinutes = clampNonNegative(toNumber(el.raceMinutes.value === '' ? 0 : el.raceMinutes.value));\n        const lapMinutes = clampNonNegative(toNumber(el.lapMinutes.value === '' ? 0 : el.lapMinutes.value));\n        const lapSeconds = clampNonNegative(toNumber(el.lapSeconds.value === '' ? 0 : el.lapSeconds.value));\n        const fuelPerLap = clampNonNegative(toNumber(el.fuelPerLap.value));\n        const tankCapacity = clampNonNegative(toNumber(el.tankCapacity.value));\n        return {\n            raceHours,\n            raceMinutes,\n            lapMinutes,\n            lapSeconds,\n            fuelPerLap,\n            tankCapacity\n        };\n    }\n    function compute() {\n        const { raceHours, raceMinutes, lapMinutes, lapSeconds, fuelPerLap, tankCapacity } = readInputs();\n        // Basic validation\n        if (!isFinite(raceHours) || !isFinite(raceMinutes) || !isFinite(lapMinutes) || !isFinite(lapSeconds) || !isFinite(fuelPerLap) || !isFinite(tankCapacity)) {\n            setOutputsInvalid();\n            return;\n        }\n        const raceTotalSeconds = raceHours * 3600 + raceMinutes * 60;\n        const lapTimeSeconds = toSeconds(lapMinutes, lapSeconds);\n        if (raceTotalSeconds <= 0 || lapTimeSeconds <= 0 || fuelPerLap <= 0) {\n            setOutputsInvalid();\n            return;\n        }\n        // Total laps by floor of time/lap\n        const totalLaps = Math.floor(raceTotalSeconds / lapTimeSeconds);\n        if (totalLaps <= 0) {\n            setOutputsInvalid();\n            return;\n        }\n        // Stint laps per full tank\n        const lapsPerStint = tankCapacity > 0 ? Math.floor(tankCapacity / fuelPerLap) : 0;\n        if (lapsPerStint <= 0) {\n            // Cannot complete any lap with current per-lap fuel usage and tank capacity\n            el.totalLaps.textContent = String(totalLaps);\n            el.pitStops.textContent = (I18N[currentLocale] || I18N.zh).cannotCompleteLap;\n            const minFuelLiters = roundUp(totalLaps * fuelPerLap, 2);\n            el.minFuel.textContent = formatLiters(minFuelLiters);\n            el.safeFuel.textContent = formatLiters(roundUp((totalLaps + 2) * fuelPerLap, 2));\n            el.lapsPerStint.textContent = '-';\n            el.lastStintLaps.textContent = '-';\n            el.stintFuelList.textContent = '-';\n            el.lastStintFuel.textContent = '-';\n            return;\n        }\n        // Stints breakdown\n        const fullStints = Math.floor(totalLaps / lapsPerStint);\n        const remainderLaps = totalLaps % lapsPerStint;\n        const hasRemainder = remainderLaps > 0;\n        const totalStints = hasRemainder ? fullStints + 1 : fullStints;\n        const pitStops = Math.max(0, totalStints - 1);\n        // Last stint laps logic\n        let lastStintLaps = 0;\n        if (totalLaps <= lapsPerStint) lastStintLaps = totalLaps; // no refuel scenario\n        else if (hasRemainder) lastStintLaps = remainderLaps;\n        else lastStintLaps = lapsPerStint; // exact division: final stint is a full stint\n        // Fuel figures\n        const minFuelLiters = roundUp(totalLaps * fuelPerLap, 2);\n        const safeFuelLiters = roundUp((totalLaps + 2) * fuelPerLap, 2);\n        const lastStintFuelLiters = roundUp(lastStintLaps * fuelPerLap, 2);\n        // Only show the fuel consumption for the first stint (前一段)\n        const firstStintLaps = Math.min(totalLaps, lapsPerStint);\n        const firstStintFuelLiters = roundUp(firstStintLaps * fuelPerLap, 2);\n        // Render with easing animations\n        animateNumber(el.totalLaps, totalLaps, {\n            duration: 500,\n            decimals: 0,\n            formatter: (v)=>String(v)\n        });\n        animateNumber(el.pitStops, pitStops, {\n            duration: 500,\n            decimals: 0,\n            formatter: (v)=>String(v)\n        });\n        animateNumber(el.minFuel, minFuelLiters, {\n            duration: 600,\n            decimals: 2,\n            formatter: (v)=>formatLiters(Number(v))\n        });\n        animateNumber(el.safeFuel, safeFuelLiters, {\n            duration: 600,\n            decimals: 2,\n            formatter: (v)=>formatLiters(Number(v))\n        });\n        animateNumber(el.lapsPerStint, lapsPerStint, {\n            duration: 500,\n            decimals: 0,\n            formatter: (v)=>String(v)\n        });\n        animateNumber(el.lastStintLaps, lastStintLaps, {\n            duration: 500,\n            decimals: 0,\n            formatter: (v)=>String(v)\n        });\n        animateNumber(el.stintFuelList, firstStintFuelLiters, {\n            duration: 600,\n            decimals: 2,\n            formatter: (v)=>formatLiters(Number(v))\n        });\n        animateNumber(el.lastStintFuel, lastStintFuelLiters, {\n            duration: 600,\n            decimals: 2,\n            formatter: (v)=>formatLiters(Number(v))\n        });\n    }\n    function setOutputsInvalid() {\n        el.totalLaps.textContent = '-';\n        el.pitStops.textContent = '-';\n        el.minFuel.textContent = '-';\n        el.safeFuel.textContent = '-';\n        el.lapsPerStint.textContent = '-';\n        el.lastStintLaps.textContent = '-';\n        el.stintFuelList.textContent = '-';\n        el.lastStintFuel.textContent = '-';\n    }\n    function wire() {\n        el.calculateBtn.addEventListener('click', compute);\n        el.resetBtn.addEventListener('click', ()=>{\n            el.raceHours.value = '0';\n            el.raceMinutes.value = '0';\n            el.lapMinutes.value = '0';\n            el.lapSeconds.value = '0';\n            el.fuelPerLap.value = '';\n            el.tankCapacity.value = '';\n            setOutputsInvalid();\n        });\n        const sel = document.getElementById('langSelect');\n        if (sel) sel.addEventListener('change', ()=>{\n            const locale = sel.value === 'en' ? 'en' : 'zh';\n            localStorage.setItem('locale', locale);\n            applyTranslations(locale);\n        });\n    }\n    // Initialize\n    const initialLocale = detectLocale();\n    applyTranslations(initialLocale);\n    wire();\n    setOutputsInvalid();\n})();\n\n//# sourceMappingURL=Sim-Racing-Fuel--Calculator.475d65e0.js.map\n","(function () {\r\n\t// ---- i18n ----\r\n\tconst I18N = {\r\n\t\tzh: {\r\n\t\t\tlangName: '中文',\r\n\t\t\ttitle: '模拟赛车燃油计算器',\r\n\t\t\tdocTitle: '模拟赛车燃油计算器',\r\n\t\t\tintroNote: '快速计算任何模拟赛车游戏（包括 ACC、iRacing、Assetto Corsa Evo、AMS2 等）的正确燃油量。只需输入每圈燃油量、比赛距离和油箱容量，即可查看需要进站次数和起始燃油量。',\r\n\t\t\tinputsHeader: '输入',\r\n\t\t\tresultsHeader: '结果',\r\n\t\t\tlblRaceTime: '比赛时间',\r\n\t\t\tlblLapTime: '平均单圈时间',\r\n\t\t\tlblFuelPerLap: '每圈油耗',\r\n\t\t\tlblTankCapacity: '油箱油量',\r\n\t\t\tplaceholderHours: '小时',\r\n\t\t\tplaceholderMinutes: '分钟',\r\n\t\t\tplaceholderLapMin: '分',\r\n\t\t\tplaceholderLapSec: '秒',\r\n\t\t\tsufHours: '小时',\r\n\t\t\tsufMinutes: '分钟',\r\n\t\t\tsufLapMin: '分',\r\n\t\t\tsufLapSec: '秒',\r\n\t\t\tsufFuelPerLap: '升/圈',\r\n\t\t\tsufTankCapacity: '升',\r\n\t\t\tbtnCalculate: '计算',\r\n\t\t\tbtnReset: '清空',\r\n\t\t\tlblTotalLaps: '总圈数',\r\n\t\t\tlblPitStops: '需要进站加油（次数）',\r\n\t\t\tlblMinFuel: '完赛最低需要燃油量',\r\n\t\t\tlblSafeFuel: '安全燃油（总圈数+2）',\r\n\t\t\tlblLapsPerStint: '每段比赛圈数（每箱）',\r\n\t\t\tlblLastStintLaps: '最后阶段圈数',\r\n\t\t\tlblStintFuelList: '每段行程的燃油消耗',\r\n\t\t\tlblLastStintFuel: '最后阶段的燃料量',\r\n\t\t\tformulaNote: '说明：总圈数按 ⌊比赛总时长 ÷ 平均单圈时间⌋ 计算。',\r\n\t\t\tcannotCompleteLap: '无法完成一圈（油箱容量过小）',\r\n\t\t\tunitLiter: '升'\r\n\t\t},\r\n\t\ten: {\r\n\t\t\tlangName: 'English',\r\n\t\t\ttitle: 'Sim Racing Fuel Calculator',\r\n\t\t\tdocTitle: 'Sim Racing Fuel Calculator',\r\n\t\t\tintroNote: 'Quickly calculate the right fuel for any sim racing game (ACC, iRacing, Assetto Corsa Evo, AMS2, etc.). Enter fuel per lap, race duration and tank capacity to see pit stops and starting fuel.',\r\n\t\t\tinputsHeader: 'Inputs',\r\n\t\t\tresultsHeader: 'Results',\r\n\t\t\tlblRaceTime: 'Race duration',\r\n\t\t\tlblLapTime: 'Average lap time',\r\n\t\t\tlblFuelPerLap: 'Fuel per lap',\r\n\t\t\tlblTankCapacity: 'Tank capacity',\r\n\t\t\tplaceholderHours: 'Hours',\r\n\t\t\tplaceholderMinutes: 'Minutes',\r\n\t\t\tplaceholderLapMin: 'Min',\r\n\t\t\tplaceholderLapSec: 'Sec',\r\n\t\t\tsufHours: 'h',\r\n\t\t\tsufMinutes: 'min',\r\n\t\t\tsufLapMin: 'min',\r\n\t\t\tsufLapSec: 'sec',\r\n\t\t\tsufFuelPerLap: 'L/lap',\r\n\t\t\tsufTankCapacity: 'L',\r\n\t\t\tbtnCalculate: 'Calculate',\r\n\t\t\tbtnReset: 'Reset',\r\n\t\t\tlblTotalLaps: 'Total laps',\r\n\t\t\tlblPitStops: 'Pit stops (count)',\r\n\t\t\tlblMinFuel: 'Minimum fuel to finish',\r\n\t\t\tlblSafeFuel: 'Safe fuel (laps+2)',\r\n\t\t\tlblLapsPerStint: 'Laps per stint (per tank)',\r\n\t\t\tlblLastStintLaps: 'Last stint laps',\r\n\t\t\tlblStintFuelList: 'Fuel for first stint',\r\n\t\t\tlblLastStintFuel: 'Fuel for last stint',\r\n\t\t\tformulaNote: 'Note: Total laps = ⌊race duration ÷ average lap time⌋.',\r\n\t\t\tcannotCompleteLap: 'Cannot complete a lap (tank capacity too small)',\r\n\t\t\tunitLiter: 'L'\r\n\t\t}\r\n\t};\r\n\r\n\tlet currentLocale = 'zh';\r\n\r\n\tfunction detectLocale() {\r\n\t\tconst saved = localStorage.getItem('locale');\r\n\t\tif (saved === 'zh' || saved === 'en') return saved;\r\n\t\tconst nav = (navigator.language || navigator.userLanguage || '').toLowerCase();\r\n\t\treturn nav.startsWith('zh') ? 'zh' : 'en';\r\n\t}\r\n\r\n\tfunction applyTranslations(locale) {\r\n\t\tconst t = I18N[locale] || I18N.zh;\r\n\t\tcurrentLocale = locale;\r\n\t\t// html lang\r\n\t\tdocument.documentElement.setAttribute('lang', locale === 'zh' ? 'zh-CN' : 'en');\r\n\t\t// document and title\r\n\t\tdocument.title = t.docTitle;\r\n\t\tconst map = [\r\n\t\t\t['title', 'title'],\r\n\t\t\t['introNote', 'introNote'],\r\n\t\t\t['inputsHeader', 'inputsHeader'],\r\n\t\t\t['resultsHeader', 'resultsHeader'],\r\n\t\t\t['lblRaceTime', 'lblRaceTime'],\r\n\t\t\t['lblLapTime', 'lblLapTime'],\r\n\t\t\t['lblFuelPerLap', 'lblFuelPerLap'],\r\n\t\t\t['lblTankCapacity', 'lblTankCapacity'],\r\n\t\t\t['sufHours', 'sufHours'],\r\n\t\t\t['sufMinutes', 'sufMinutes'],\r\n\t\t\t['sufLapMin', 'sufLapMin'],\r\n\t\t\t['sufLapSec', 'sufLapSec'],\r\n\t\t\t['sufFuelPerLap', 'sufFuelPerLap'],\r\n\t\t\t['sufTankCapacity', 'sufTankCapacity'],\r\n\t\t\t['calculateBtn', 'btnCalculate'],\r\n\t\t\t['resetBtn', 'btnReset'],\r\n\t\t\t['lblTotalLaps', 'lblTotalLaps'],\r\n\t\t\t['lblPitStops', 'lblPitStops'],\r\n\t\t\t['lblMinFuel', 'lblMinFuel'],\r\n\t\t\t['lblSafeFuel', 'lblSafeFuel'],\r\n\t\t\t['lblLapsPerStint', 'lblLapsPerStint'],\r\n\t\t\t['lblLastStintLaps', 'lblLastStintLaps'],\r\n\t\t\t['lblStintFuelList', 'lblStintFuelList'],\r\n\t\t\t['lblLastStintFuel', 'lblLastStintFuel'],\r\n\t\t\t['formulaNote', 'formulaNote']\r\n\t\t];\r\n\t\tfor (const [id, key] of map) {\r\n\t\t\tconst node = document.getElementById(id);\r\n\t\t\tif (node && t[key] !== undefined) node.textContent = t[key];\r\n\t\t}\r\n\t\t// placeholders\r\n\t\tconst raceHours = document.getElementById('raceHours');\r\n\t\tconst raceMinutes = document.getElementById('raceMinutes');\r\n\t\tconst lapMinutes = document.getElementById('lapMinutes');\r\n\t\tconst lapSeconds = document.getElementById('lapSeconds');\r\n\t\tconst fuelPerLap = document.getElementById('fuelPerLap');\r\n\t\tconst tankCapacity = document.getElementById('tankCapacity');\r\n\t\tif (raceHours) raceHours.placeholder = t.placeholderHours;\r\n\t\tif (raceMinutes) raceMinutes.placeholder = t.placeholderMinutes;\r\n\t\tif (lapMinutes) lapMinutes.placeholder = t.placeholderLapMin;\r\n\t\tif (lapSeconds) lapSeconds.placeholder = t.placeholderLapSec;\r\n\t\tif (fuelPerLap) fuelPerLap.placeholder = locale === 'zh' ? '例如 2.75' : 'e.g. 2.75';\r\n\r\n\t\tif (tankCapacity) tankCapacity.placeholder = locale === 'zh' ? '例如 100' : 'e.g. 100';\r\n\t\t// dropdown value sync\r\n\t\tconst sel = document.getElementById('langSelect');\r\n\t\tif (sel) sel.value = locale;\r\n\t}\r\n\tfunction toNumber(value) {\r\n\t\tif (value === '' || value === null || value === undefined) return NaN;\r\n\t\treturn Number(value);\r\n\t}\r\n\r\n\tfunction clampNonNegative(n) {\r\n\t\treturn isFinite(n) && n >= 0 ? n : NaN;\r\n\t}\r\n\r\n\tfunction toSeconds(mins, secs) {\r\n\t\treturn mins * 60 + secs;\r\n\t}\r\n\r\n\tfunction roundUp(value, decimals) {\r\n\t\tif (!isFinite(value)) return NaN;\r\n\t\tconst factor = Math.pow(10, decimals);\r\n\t\treturn Math.ceil(value * factor - 1e-10) / factor;\r\n\t}\r\n\r\n\tfunction round(value, decimals) {\r\n\t\tif (!isFinite(value)) return NaN;\r\n\t\tconst factor = Math.pow(10, decimals);\r\n\t\treturn Math.round((value + Number.EPSILON) * factor) / factor;\r\n\t}\r\n\r\n\tfunction formatLiters(n) {\r\n\t\tif (!isFinite(n)) return '-';\r\n\t\tconst t = I18N[currentLocale] || I18N.zh;\r\n\t\treturn currentLocale === 'zh' ? `${n.toFixed(2)} ${t.unitLiter}` : `${n.toFixed(2)} ${t.unitLiter}`;\r\n\t}\r\n\r\n\tfunction $(id) { return document.getElementById(id); }\r\n\r\n\t// ---- easing + animation helpers ----\r\n\tfunction easeOutCubic(t) {\r\n\t\treturn 1 - Math.pow(1 - t, 3);\r\n\t}\r\n\r\n\tfunction parseNumericFromText(text) {\r\n\t\tif (!text || text === '-') return NaN;\r\n\t\tconst m = String(text).match(/-?\\d+(?:\\.\\d+)?/);\r\n\t\treturn m ? Number(m[0]) : NaN;\r\n\t}\r\n\r\n\tfunction animateNumber(elNode, toValue, options) {\r\n\t\tconst { duration = 500, decimals = 0, formatter = (v) => String(v) } = options || {};\r\n\t\tconst fromText = elNode.textContent;\r\n\t\tconst fromValue = parseNumericFromText(fromText);\r\n\t\tif (!isFinite(fromValue)) {\r\n\t\t\t// no previous numeric value, set immediately\r\n\t\t\telNode.textContent = formatter(Number(toValue));\r\n\t\t\tbumpCard(elNode);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst start = performance.now();\r\n\t\tfunction frame(now) {\r\n\t\t\tconst t = Math.min(1, (now - start) / duration);\r\n\t\t\tconst e = easeOutCubic(t);\r\n\t\t\tconst current = fromValue + (toValue - fromValue) * e;\r\n\t\t\tconst rounded = decimals > 0 ? Number(current.toFixed(decimals)) : Math.round(current);\r\n\t\t\telNode.textContent = formatter(rounded);\r\n\t\t\tif (t < 1) {\r\n\t\t\t\trequestAnimationFrame(frame);\r\n\t\t\t} else {\r\n\t\t\t\telNode.textContent = formatter(toValue);\r\n\t\t\t\tbumpCard(elNode);\r\n\t\t\t}\r\n\t\t}\r\n\t\trequestAnimationFrame(frame);\r\n\t}\r\n\r\n\tfunction bumpCard(valueEl) {\r\n\t\tconst card = valueEl.closest('.result-item');\r\n\t\tif (!card) return;\r\n\t\tcard.classList.remove('bump');\r\n\t\t// force reflow to restart animation\r\n\t\tvoid card.offsetWidth;\r\n\t\tcard.classList.add('bump');\r\n\t}\r\n\r\n\tconst el = {\r\n\t\traceHours: $('raceHours'),\r\n\t\traceMinutes: $('raceMinutes'),\r\n\t\tlapMinutes: $('lapMinutes'),\r\n\t\tlapSeconds: $('lapSeconds'),\r\n\t\tfuelPerLap: $('fuelPerLap'),\r\n\t\ttankCapacity: $('tankCapacity'),\r\n\t\tcalculateBtn: $('calculateBtn'),\r\n\t\tresetBtn: $('resetBtn'),\r\n\t\ttotalLaps: $('totalLaps'),\r\n\t\tpitStops: $('pitStops'),\r\n\t\tminFuel: $('minFuel'),\r\n\t\tsafeFuel: $('safeFuel'),\r\n\t\tlapsPerStint: $('lapsPerStint'),\r\n\t\tlastStintLaps: $('lastStintLaps'),\r\n\t\tstintFuelList: $('stintFuelList'),\r\n\t\tlastStintFuel: $('lastStintFuel')\r\n\t};\r\n\r\n\tfunction readInputs() {\r\n\t\t// Time fields default to 0 when empty\r\n\t\tconst raceHours = clampNonNegative(toNumber(el.raceHours.value === '' ? 0 : el.raceHours.value));\r\n\t\tconst raceMinutes = clampNonNegative(toNumber(el.raceMinutes.value === '' ? 0 : el.raceMinutes.value));\r\n\t\tconst lapMinutes = clampNonNegative(toNumber(el.lapMinutes.value === '' ? 0 : el.lapMinutes.value));\r\n\t\tconst lapSeconds = clampNonNegative(toNumber(el.lapSeconds.value === '' ? 0 : el.lapSeconds.value));\r\n\t\tconst fuelPerLap = clampNonNegative(toNumber(el.fuelPerLap.value));\r\n\t\tconst tankCapacity = clampNonNegative(toNumber(el.tankCapacity.value));\r\n\r\n\t\treturn { raceHours, raceMinutes, lapMinutes, lapSeconds, fuelPerLap, tankCapacity };\r\n\t}\r\n\r\n\tfunction compute() {\r\n\t\tconst { raceHours, raceMinutes, lapMinutes, lapSeconds, fuelPerLap, tankCapacity } = readInputs();\r\n\r\n\t\t// Basic validation\r\n\t\tif (!isFinite(raceHours) || !isFinite(raceMinutes) || !isFinite(lapMinutes) || !isFinite(lapSeconds) || !isFinite(fuelPerLap) || !isFinite(tankCapacity)) {\r\n\t\t\tsetOutputsInvalid();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst raceTotalSeconds = (raceHours * 3600) + (raceMinutes * 60);\r\n\t\tconst lapTimeSeconds = toSeconds(lapMinutes, lapSeconds);\r\n\r\n\t\tif (raceTotalSeconds <= 0 || lapTimeSeconds <= 0 || fuelPerLap <= 0) {\r\n\t\t\tsetOutputsInvalid();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Total laps by floor of time/lap\r\n\t\tconst totalLaps = Math.floor(raceTotalSeconds / lapTimeSeconds);\r\n\t\tif (totalLaps <= 0) {\r\n\t\t\tsetOutputsInvalid();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Stint laps per full tank\r\n\t\tconst lapsPerStint = tankCapacity > 0 ? Math.floor(tankCapacity / fuelPerLap) : 0;\r\n\t\tif (lapsPerStint <= 0) {\r\n\t\t\t// Cannot complete any lap with current per-lap fuel usage and tank capacity\r\n\t\t\tel.totalLaps.textContent = String(totalLaps);\r\n\t\t\tel.pitStops.textContent = (I18N[currentLocale] || I18N.zh).cannotCompleteLap;\r\n\t\t\tconst minFuelLiters = roundUp(totalLaps * fuelPerLap, 2);\r\n\t\t\tel.minFuel.textContent = formatLiters(minFuelLiters);\r\n\t\t\tel.safeFuel.textContent = formatLiters(roundUp((totalLaps + 2) * fuelPerLap, 2));\r\n\t\t\tel.lapsPerStint.textContent = '-';\r\n\t\t\tel.lastStintLaps.textContent = '-';\r\n\t\t\tel.stintFuelList.textContent = '-';\r\n\t\t\tel.lastStintFuel.textContent = '-';\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Stints breakdown\r\n\t\tconst fullStints = Math.floor(totalLaps / lapsPerStint);\r\n\t\tconst remainderLaps = totalLaps % lapsPerStint;\r\n\t\tconst hasRemainder = remainderLaps > 0;\r\n\t\tconst totalStints = hasRemainder ? (fullStints + 1) : fullStints;\r\n\t\tconst pitStops = Math.max(0, totalStints - 1);\r\n\r\n\t\t// Last stint laps logic\r\n\t\tlet lastStintLaps = 0;\r\n\t\tif (totalLaps <= lapsPerStint) {\r\n\t\t\tlastStintLaps = totalLaps; // no refuel scenario\r\n\t\t} else if (hasRemainder) {\r\n\t\t\tlastStintLaps = remainderLaps;\r\n\t\t} else {\r\n\t\t\tlastStintLaps = lapsPerStint; // exact division: final stint is a full stint\r\n\t\t}\r\n\r\n\t\t// Fuel figures\r\n\t\tconst minFuelLiters = roundUp(totalLaps * fuelPerLap, 2);\r\n\t\tconst safeFuelLiters = roundUp((totalLaps + 2) * fuelPerLap, 2);\r\n\t\tconst lastStintFuelLiters = roundUp(lastStintLaps * fuelPerLap, 2);\r\n\r\n\t\t// Only show the fuel consumption for the first stint (前一段)\r\n\t\tconst firstStintLaps = Math.min(totalLaps, lapsPerStint);\r\n\t\tconst firstStintFuelLiters = roundUp(firstStintLaps * fuelPerLap, 2);\r\n\r\n\t\t// Render with easing animations\r\n\t\tanimateNumber(el.totalLaps, totalLaps, { duration: 500, decimals: 0, formatter: (v) => String(v) });\r\n\t\tanimateNumber(el.pitStops, pitStops, { duration: 500, decimals: 0, formatter: (v) => String(v) });\r\n\t\tanimateNumber(el.minFuel, minFuelLiters, { duration: 600, decimals: 2, formatter: (v) => formatLiters(Number(v)) });\r\n\t\tanimateNumber(el.safeFuel, safeFuelLiters, { duration: 600, decimals: 2, formatter: (v) => formatLiters(Number(v)) });\r\n\t\tanimateNumber(el.lapsPerStint, lapsPerStint, { duration: 500, decimals: 0, formatter: (v) => String(v) });\r\n\t\tanimateNumber(el.lastStintLaps, lastStintLaps, { duration: 500, decimals: 0, formatter: (v) => String(v) });\r\n\t\tanimateNumber(el.stintFuelList, firstStintFuelLiters, { duration: 600, decimals: 2, formatter: (v) => formatLiters(Number(v)) });\r\n\t\tanimateNumber(el.lastStintFuel, lastStintFuelLiters, { duration: 600, decimals: 2, formatter: (v) => formatLiters(Number(v)) });\r\n\t}\r\n\r\n\tfunction setOutputsInvalid() {\r\n\t\tel.totalLaps.textContent = '-';\r\n\t\tel.pitStops.textContent = '-';\r\n\t\tel.minFuel.textContent = '-';\r\n\t\tel.safeFuel.textContent = '-';\r\n\t\tel.lapsPerStint.textContent = '-';\r\n\t\tel.lastStintLaps.textContent = '-';\r\n\t\tel.stintFuelList.textContent = '-';\r\n\t\tel.lastStintFuel.textContent = '-';\r\n\t}\r\n\r\n\tfunction wire() {\r\n\t\tel.calculateBtn.addEventListener('click', compute);\r\n\t\tel.resetBtn.addEventListener('click', () => {\r\n\t\t\tel.raceHours.value = '0';\r\n\t\t\tel.raceMinutes.value = '0';\r\n\t\t\tel.lapMinutes.value = '0';\r\n\t\t\tel.lapSeconds.value = '0';\r\n\t\t\tel.fuelPerLap.value = '';\r\n\t\t\tel.tankCapacity.value = '';\r\n\t\t\tsetOutputsInvalid();\r\n\t\t});\r\n\t\tconst sel = document.getElementById('langSelect');\r\n\t\tif (sel) {\r\n\t\t\tsel.addEventListener('change', () => {\r\n\t\t\t\tconst locale = sel.value === 'en' ? 'en' : 'zh';\r\n\t\t\t\tlocalStorage.setItem('locale', locale);\r\n\t\t\t\tapplyTranslations(locale);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t// Initialize\r\n\tconst initialLocale = detectLocale();\r\n\tapplyTranslations(initialLocale);\r\n\twire();\r\n\tsetOutputsInvalid();\r\n})();\r\n\r\n\r\n"],"names":["saved","sel","I18N","zh","langName","title","docTitle","introNote","inputsHeader","resultsHeader","lblRaceTime","lblLapTime","lblFuelPerLap","lblTankCapacity","placeholderHours","placeholderMinutes","placeholderLapMin","placeholderLapSec","sufHours","sufMinutes","sufLapMin","sufLapSec","sufFuelPerLap","sufTankCapacity","btnCalculate","btnReset","lblTotalLaps","lblPitStops","lblMinFuel","lblSafeFuel","lblLapsPerStint","lblLastStintLaps","lblStintFuelList","lblLastStintFuel","formulaNote","cannotCompleteLap","unitLiter","en","currentLocale","applyTranslations","locale","t","id","key","document","documentElement","setAttribute","node","getElementById","undefined","textContent","raceHours","raceMinutes","lapMinutes","lapSeconds","fuelPerLap","tankCapacity","placeholder","value","toNumber","NaN","Number","clampNonNegative","n","isFinite","roundUp","decimals","factor","Math","pow","ceil","formatLiters","toFixed","$","animateNumber","elNode","toValue","options","duration","formatter","v","String","fromValue","parseNumericFromText","text","m","match","bumpCard","start","performance","now","requestAnimationFrame","frame","min","current","round","valueEl","card","closest","classList","remove","offsetWidth","add","el","calculateBtn","resetBtn","totalLaps","pitStops","minFuel","safeFuel","lapsPerStint","lastStintLaps","stintFuelList","lastStintFuel","setOutputsInvalid","localStorage","getItem","nav","navigator","language","userLanguage","toLowerCase","startsWith","addEventListener","raceTotalSeconds","lapTimeSeconds","mins","floor","minFuelLiters","fullStints","remainderLaps","hasRemainder","max","totalStints","safeFuelLiters","lastStintFuelLiters","firstStintFuelLiters","firstStintLaps","setItem"],"version":3,"file":"Sim-Racing-Fuel--Calculator.475d65e0.js.map"}